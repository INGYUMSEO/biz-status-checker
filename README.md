📄 국세청 사업자등록 상태 조회 (Streamlit)

국세청 오픈API를 이용해 여러 사업자등록번호의 상태(계속/휴업/폐업)와 과세유형 등을 일괄 조회하고, 결과를 엑셀로 다운로드할 수 있는 웹 앱입니다.
한 번에 최대 100건/요청으로 처리하며, 대용량 파일도 배치 호출 + 대기 조절로 안정적으로 동작합니다. 
데이터.go.kr

📦 구성 파일
파일명	설명
streamlit_app.py	앱 메인 코드
requirements.txt	필요한 라이브러리 목록
.streamlit/config.toml	(선택) 업로드 용량 상향 설정
README.md	사용설명서

⚠️ 로컬 테스트용 .streamlit/secrets.toml(SERVICE_KEY) 를 통하여 샘플데이터 및 여러 데이터 테스트 확인 완료 

🔑 API 키 설정

로컬: .streamlit/secrets.toml

SERVICE_KEY="디코딩된_공공데이터포털_API키"


Streamlit Cloud: 앱 대시보드 → Edit secrets에서 동일 키 이름으로 등록

※ 반드시 디코딩된(=퍼센트 인코딩 없는) 키를 사용하세요.

🚀 로컬 실행
pip install -r requirements.txt
streamlit run streamlit_app.py
# 브라우저: http://localhost:8501

🖱️ 사용 방법

서비스키 입력(또는 secrets에서 자동 로드)

엑셀 업로드 (.xlsx)

시트 선택 → 헤더 행 선택(0/1/2)

사업자번호 컬럼 지정(필수), 업체명 컬럼 선택(선택)

(선택) ⚙️ 고급 설정에서

요청 배치 크기: 50~100 권장

호출 간 대기: 0.5~1.0초 권장(429 발생 시 ↑)

진행률바 확인 → 결과 표 확인 → 엑셀 다운로드

대용량일수록 업로드 후 시트/헤더/컬럼 지정까지 시간이 조금 걸릴 수 있습니다(미리보기 200행 로드).

📥 입력 엑셀 포맷(예시)
업체명	사업자번호
㈜샘플	1234567890

하이픈(-) 등은 자동 제거, 숫자만 10자리로 보정합니다.

대용량 파일은 필요 컬럼만 로드(usecols) 하므로 메모리 사용을 최소화합니다.

📤 출력 컬럼 설명

아래는 결과 엑셀에 포함될 수 있는 주요 컬럼입니다.
(※ 실제 표시는 입력 컬럼/응답 결과에 따라 일부만 노출될 수 있음)

컬럼명	의미
업체명	입력 파일에서 선택한 업체명 컬럼(선택)
사업자번호	입력 원본 사업자번호
사업자등록번호_norm	숫자만 10자리로 정규화한 사업자번호
b_no	응답의 사업자등록번호
b_stt	납세자상태(명칭): 계속사업자/휴업자/폐업 등
b_stt_cd	납세자상태(코드): 01 계속, 02 휴업, 03 폐업
tax_type	과세유형(명칭): 예) 부가가치세 일반과세자/간이과세자/면세사업자 등
tax_type_cd	과세유형(코드)
end_dt	폐업일자(YYYYMMDD)
utcc_yn	단위과세전환폐업여부(Y/N)
tax_type_change_dt	최근 과세유형 전환일자(YYYYMMDD)
invoice_apply_dt	세금계산서 적용일자(YYYYMMDD)
rbf_tax_type	직전 과세유형(명칭)
rbf_tax_type_cd	직전 과세유형(코드)

필드 의미/코드 값은 국세청 상태조회 API의 응답 구조를 기준으로 정리했습니다. (납세자상태/과세유형 코드 등) 
regression.co.kr
+1

⚙️ 성능/안정화 팁

중복·결측 제거: 동일 사업자번호 반복 조회를 피하세요.

배치/대기 조절: 429/시간초과가 보이면 배치 ↓, 대기 ↑.

업로드 한도 상향(필요 시): .streamlit/config.toml

[server]
maxUploadSize = 500  # MB

❗자주 만나는 메시지

서비스키를 입력해주세요. → secrets 또는 입력값 확인

요청 실패 4xx/5xx → 키 형식/네트워크/레이트리밋 확인, 배치/대기 조절

일시 장애 공지 등은 공공데이터포털 공지사항을 확인하세요. 
데이터.go.kr

📚 참고

국세청_사업자등록정보 진위확인 및 상태조회 서비스 (공공데이터포털) – API 개요/호출 제한(100건/회) 등. 
데이터.go.kr

필드/코드 정리 예시 – 커뮤니티/기술 블로그의 응답 필드 설명(납세자상태/과세유형, utcc_yn, 전환/적용 일자 등). 
regression.co.kr
+1